<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Pokéclicker Cheat Engine</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
</head>

<body>
    <div class="container-md">
        <h1 class="text-center">Pokéclicker Cheat Engine</h1>

        <div class="text-center">
            <img src="https://www.pokeclicker.com/assets/images/pokeclickerlogo.png" width="200" alt="logo" />
            <div class="alert alert-warning" role="alert">
                This is a work-in-progress app
            </div>
        </div>

        <div id="toggle-head" class="mb-3">
            <label for="fileinput" class="form-label"></label>
            <input class="form-control" type="file" id="fileinput">
        </div>

        <!-- ---->
        <div class="container">
            <div class="row">
                <div class="col-sm">
                    <h5 class="text-center">Supported version : 0.9.3</h5>
                </div>
                <div class="col-sm">
                    <h5 class="text-center" id="version">-</h5>
                </div>
            </div>
        </div>

        <span id="load-error" hidden="hidden">
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
                <strong>Oups.</strong> Something went wrong with your save file... Send us a message !
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        </span>


        <span id="toggle" hidden="hidden">
            <div class="accordion" id="accordionExample">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingOne">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                            Player infos / display
                        </button>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne"
                        data-bs-parent="#accordionExample">
                        <div class="accordion-body">
                            <div class="mb-3 row">
                                <label for="playername" class="col-sm-2 col-form-label">Name</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control" id="playername" placeholder="">
                                </div>
                                <label for="trainer" class="col-sm-2 col-form-label">Trainer number</label>
                                <div class="col-sm-10">
                                    <input type="number" class="form-control" id="trainer" placeholder="">
                                </div>
                                <label for="pokemon" class="col-sm-2 col-form-label">Pokemon</label>
                                <div class="col-sm-10">
                                    <div class="input-group col-sm-8">
                                        <input type="number" class="form-control" id="pokemon"
                                            aria-label="Text input with checkbox">
                                        <div class="input-group-text">
                                            <span>Is shiny ? </span>
                                            <input class="form-check-input sm-2" id="trainer-shiny" type="checkbox"
                                                value="false" aria-label="Is shiny">
                                        </div>
                                    </div>
                                </div>
                                <label for="background" class="col-sm-2 col-form-label">Background</label>
                                <div class="col-sm-8">
                                    <input type="number" class="form-control" id="background" placeholder="">
                                </div>
                                <div class="col-sm-2">
                                    <input type="color" class="form-control" id="colorpicker" value="#000000">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingTwo">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                            Eggs breeding - list of eggs
                        </button>
                    </h2>
                    <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo"
                        data-bs-parent="#accordionExample">
                        <div class="accordion-body">
                            <div class="mb-3 row">
                                <div class="container">
                                    <div class="row">
                                        <div class="col-md">
                                            <h6 class="text-center">Egg 1</h6>
                                            <label for="egg1name" class="col-form-label">Pokemon</label>
                                            <input type="text" class="form-control" id="egg1name" placeholder="">
                                            <label for="egg1totalsteps" class="col-form-label">Total steps</label>
                                            <input type="number" class="form-control" id="egg1totalsteps"
                                                placeholder="">
                                            <label for="egg1steps" class="col-form-label">Current steps</label>
                                            <input type="number" class="form-control" id="egg1steps" placeholder="">
                                            <label for="egg1shinychance" class="col-form-label">Shiny chances</label>
                                            <input type="number" class="form-control" id="egg1shinychance"
                                                placeholder="">
                                        </div>
                                        <div class="col-md">
                                            <h6 class="text-center">Egg 2</h6>
                                            <label for="egg2name" class="col-form-label">Pokemon</label>
                                            <input type="text" class="form-control" id="egg2name" placeholder="">
                                            <label for="egg2totalsteps" class="col-form-label">Total steps</label>
                                            <input type="number" class="form-control" id="egg2totalsteps"
                                                placeholder="">
                                            <label for="egg2steps" class="col-form-label">Current steps</label>
                                            <input type="number" class="form-control" id="egg2steps" placeholder="">
                                            <label for="egg2shinychance" class="col-form-label">Shiny chances</label>
                                            <input type="number" class="form-control" id="egg2shinychance"
                                                placeholder="">
                                        </div>
                                        <div class="col-md">
                                            <h6 class="text-center">Egg 3</h6>
                                            <label for="egg3name" class="col-form-label">Pokemon</label>
                                            <input type="text" class="form-control" id="egg3name" placeholder="">
                                            <label for="egg3totalsteps" class="col-form-label">Total steps</label>
                                            <input type="number" class="form-control" id="egg3totalsteps"
                                                placeholder="">
                                            <label for="egg3steps" class="col-form-label">Current steps</label>
                                            <input type="number" class="form-control" id="egg3steps" placeholder="">
                                            <label for="egg3shinychance" class="col-form-label">Shiny chances</label>
                                            <input type="number" class="form-control" id="egg3shinychance"
                                                placeholder="">
                                        </div>
                                        <div class="col-md">
                                            <h6 class="text-center">Egg 4</h6>
                                            <label for="egg4name" class="col-form-label">Pokemon</label>
                                            <input type="text" class="form-control" id="egg4name" placeholder="">
                                            <label for="egg4totalsteps" class="col-form-label">Total steps</label>
                                            <input type="number" class="form-control" id="egg4totalsteps"
                                                placeholder="">
                                            <label for="egg4steps" class="col-form-label">Current steps</label>
                                            <input type="number" class="form-control" id="egg4steps" placeholder="">
                                            <label for="egg4shinychance" class="col-form-label">Shiny chances</label>
                                            <input type="number" class="form-control" id="egg4shinychance"
                                                placeholder="">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingThree">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                            Inventory
                        </button>
                    </h2>
                    <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree"
                        data-bs-parent="#accordionExample">
                        <div class="accordion-body" id="items">

                        </div>
                    </div>
                </div>
            </div>
            <!-- --->

            <hr />

            <div class="container">
                <div class="d-grid gap-2">
                    <button type="button" id="download" class="btn btn-large btn-outline-primary">Download altered
                        file</button>
                </div>
            </div>
        </span>

        <div class="text-center">
            <span class="badge badge-pill badge-light">
                <a href="https://github.com/CorentinLeGuen">Made by CorentinLeGuen - Free to use, reproduce, update &
                    share</a>
            </span>
        </div>
    </div>

    <script type="text/javascript">
        var updated_content = {
            some: "stuffs",
            alot: "of them!"
        }

        function readSingleFile(evt) {
            var f = evt.target.files[0];

            if (f) {
                var r = new FileReader();
                r.onload = function (e) {
                    var content_b64 = e.target.result;
                    try {
                        var contents = JSON.parse(atob(content_b64)); 10
                    } catch (err) {

                        document.getElementById('load-error').removeAttribute("hidden");
                        return;
                    }

                    updated_content = contents;

                    document.getElementById('toggle').removeAttribute("hidden");
                    document.getElementById('toggle-head').style.display = "none";

                    // player
                    document.getElementById('playername').placeholder = contents.save.profile.name;
                    document.getElementById('trainer').placeholder = contents.save.profile.trainer;
                    document.getElementById('colorpicker').defaultValue = contents.save.profile.textColor;
                    document.getElementById('pokemon').value = contents.save.profile.pokemon;
                    document.getElementById('trainer-shiny').checked = contents.save.profile.pokemonShiny;
                    document.getElementById('background').placeholder = contents.save.profile.background;

                    // eggs
                    //      1
                    if (contents.save.breeding.eggList[0].pokemon !== 'MissingNo.') {
                        document.getElementById('egg1name').placeholder = contents.save.breeding.eggList[0].pokemon;
                        document.getElementById('egg1totalsteps').placeholder = contents.save.breeding.eggList[0].totalSteps;
                        document.getElementById('egg1steps').placeholder = contents.save.breeding.eggList[0].steps;
                        document.getElementById('egg1shinychance').placeholder = contents.save.breeding.eggList[0].shinyChance;
                    }
                    //      2
                    if (contents.save.breeding.eggList[1].pokemon !== 'MissingNo.') {
                        document.getElementById('egg2name').placeholder = contents.save.breeding.eggList[1].pokemon;
                        document.getElementById('egg2totalsteps').placeholder = contents.save.breeding.eggList[1].totalSteps;
                        document.getElementById('egg2steps').placeholder = contents.save.breeding.eggList[1].steps;
                        document.getElementById('egg2shinychance').placeholder = contents.save.breeding.eggList[1].shinyChance;
                    }
                    //      3
                    if (contents.save.breeding.eggList[2].pokemon !== 'MissingNo.') {
                        document.getElementById('egg3name').placeholder = contents.save.breeding.eggList[2].pokemon;
                        document.getElementById('egg3totalsteps').placeholder = contents.save.breeding.eggList[2].totalSteps;
                        document.getElementById('egg3steps').placeholder = contents.save.breeding.eggList[2].steps;
                        document.getElementById('egg3shinychance').placeholder = contents.save.breeding.eggList[2].shinyChance;
                    }
                    //      4
                    if (contents.save.breeding.eggList[3].pokemon !== 'MissingNo.') {
                        document.getElementById('egg4name').placeholder = contents.save.breeding.eggList[3].pokemon;
                        document.getElementById('egg4totalsteps').placeholder = contents.save.breeding.eggList[3].totalSteps;
                        document.getElementById('egg4steps').placeholder = contents.save.breeding.eggList[3].steps;
                        document.getElementById('egg4shinychance').placeholder = contents.save.breeding.eggList[3].shinyChance;
                    }

                    document.getElementById('version').innerHTML = 'Actual version : ' + contents.save.update.version;
                }
                r.readAsText(f);

            }
        }

        download.onclick = (function () {
            let j = document.createElement("a");
            j.download = "poke-cheat-engine_" + Date.now() + ".txt";

            // player
            if (document.getElementById('playername').value) {
                updated_content.save.profile.name = document.getElementById('playername').value;
            }
            if (document.getElementById('trainer').value) {
                updated_content.save.profile.trainer = document.getElementById('trainer').value;
            }
            if (document.getElementById('colorpicker').value) {
                updated_content.save.profile.textColor = document.getElementById('colorpicker').value;
            }
            if (document.getElementById('pokemon').value) {
                updated_content.save.profile.pokemon = document.getElementById('pokemon').value;
            }
            updated_content.save.profile.pokemonShiny = document.getElementById('trainer-shiny').checked;
            if (document.getElementById('background').value) {
                updated_content.save.profile.background = document.getElementById('background').value;
            }

            // eggs
            //      1
            if (document.getElementById('egg1name').value) {
                updated_content.save.breeding.eggList[0].pokemon = document.getElementById('egg1name').value;
            }
            if (document.getElementById('egg1totalsteps').value) {
                updated_content.save.breeding.eggList[0].totalSteps = document.getElementById('egg1totalsteps').value;
            }
            if (document.getElementById('egg1steps').value) {
                updated_content.save.breeding.eggList[0].steps = document.getElementById('egg1steps').value;
            }
            if (document.getElementById('egg1shinychance').value) {
                updated_content.save.breeding.eggList[0].shinyChance = document.getElementById('egg1shinychance').value
            }

            //      2
            if (document.getElementById('egg2name').value) {
                updated_content.save.breeding.eggList[1].pokemon = document.getElementById('egg2name').value;
            }
            if (document.getElementById('egg2totalsteps').value) {
                updated_content.save.breeding.eggList[1].totalSteps = document.getElementById('egg2totalsteps').value;
            }
            if (document.getElementById('egg2steps').value) {
                updated_content.save.breeding.eggList[1].steps = document.getElementById('egg2steps').value;
            }
            if (document.getElementById('egg2shinychance').value) {
                updated_content.save.breeding.eggList[1].shinyChance = document.getElementById('egg2shinychance').value
            }

            //      3
            if (document.getElementById('egg3name').value) {
                updated_content.save.breeding.eggList[2].pokemon = document.getElementById('egg3name').value;
            }
            if (document.getElementById('egg3totalsteps').value) {
                updated_content.save.breeding.eggList[2].totalSteps = document.getElementById('egg3totalsteps').value;
            }
            if (document.getElementById('egg3steps').value) {
                updated_content.save.breeding.eggList[2].steps = document.getElementById('egg3steps').value;
            }
            if (document.getElementById('egg3shinychance').value) {
                updated_content.save.breeding.eggList[2].shinyChance = document.getElementById('egg3shinychance').value
            }

            //      4
            if (document.getElementById('egg4name').value) {
                updated_content.save.breeding.eggList[3].pokemon = document.getElementById('egg4name').value;
            }
            if (document.getElementById('egg4totalsteps').value) {
                updated_content.save.breeding.eggList[3].totalSteps = document.getElementById('egg4totalsteps').value;
            }
            if (document.getElementById('egg4steps').value) {
                updated_content.save.breeding.eggList[3].steps = document.getElementById('egg4steps').value;
            }
            if (document.getElementById('egg4shinychance').value) {
                updated_content.save.breeding.eggList[3].shinyChance = document.getElementById('egg4shinychance').value
            }

            j.href = URL.createObjectURL(
                new Blob([btoa(JSON.stringify(updated_content, null, 2))])
            );
            j.click()
        });

        document.getElementById('fileinput').addEventListener('change', readSingleFile, false);
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
        crossorigin="anonymous"></script>
</body>

</html>